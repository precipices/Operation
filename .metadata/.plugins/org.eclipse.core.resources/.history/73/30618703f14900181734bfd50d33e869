package temp;

import java.awt.CardLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

import com.operation.appoint.MainOperationPane;
import com.operation.mainframe.InitParas;
import com.operation.myComponent.BackButton;
import com.operation.myComponent.BackFrame;
import com.operation.myComponent.BackPane;
import com.operation.myComponent.DateChooser;
import com.operation.select.SelectAnesthetistPane;
import com.operation.select.SelectNursePane;
import com.operation.select.SelectPatientPane;

public class AppointPane extends BackPane {
	
	private AppointListener listener;
	
	private JLabel beginTime;
	private String[] jlNames=new String[] {"病人","手术名称","手术日期","手术室","护士","麻醉师"};
	private JLabel[] jls=new JLabel[jlNames.length];
	JTextField patient;
	JTextField nurse;
	JTextField anesthetist;
	JButton submit,back;
	MainOperationPane parent;
	CardLayout card=null;
	public AppointPane(MainOperationPane parent) {
		this.parent=parent;
		card=new CardLayout();
		this.setLayout(card);
		BackPane mainPane=new BackPane();
		mainPane.add(createMainPane());
		this.add(mainPane, "手术预约");
		this.add(new SelectPatientPane(), "查询病人");
		this.add(new SelectNursePane(), "查询护士");
		this.add(new SelectAnesthetistPane(), "查询麻醉师");
	}
	private BackPane createMainPane() {
		BackPane mainPane=new BackPane();
		for(int i=0;i<jlNames.length;i++) {
			jls[i]=new JLabel(jlNames[i]);
		}
		patient = new JTextField(10);
		nurse = new JTextField(10);
		anesthetist = new JTextField(10);
		patient.setText("点击选择病人");
		patient.setEnabled(false);
		nurse.setText("点击选择护士");
		nurse.setEnabled(false);
		anesthetist.setText("点击选择麻醉师");
		anesthetist.setEnabled(false);

		JComboBox roomName=new JComboBox(InitParas.ROOM_NAME);
		JComboBox opName=new JComboBox(InitParas.OPERATION_NAMES);
		
		beginTime=new JLabel("单击选择手术时间");
		DateChooser dateChooser=DateChooser.getInstance("yyyy-MM-dd");
		dateChooser.register(beginTime);

		submit=new BackButton("提交");
		back = new BackButton("返回");
		GridLayout grid=new GridLayout(8,2,5,5);
		mainPane.setLayout(grid);
		//添加到面板上
		int i=0;
		mainPane.add(jls[i++]);
		mainPane.add(patient);
		mainPane.add(jls[i++]);
		mainPane.add(opName);
		mainPane.add(jls[i++]);
		mainPane.add(beginTime);
		mainPane.add(jls[i++]);
		mainPane.add(roomName);
		mainPane.add(jls[i++]);
		mainPane.add(nurse);
		mainPane.add(jls[i++]);
		mainPane.add(anesthetist);
		mainPane.add(submit);
		mainPane.add(back);
		addSelectListener();
		return mainPane;
	}
	private void addSelectListener() {
		patient.addMouseListener(new MouseAdapter() {

			@Override
			public void mouseClicked(MouseEvent arg0) {
				card.show(AppointPane.this,"查询病人");
			}
			
		});
		nurse.addMouseListener(new MouseAdapter() {

			@Override
			public void mouseClicked(MouseEvent arg0) {
				card.show(AppointPane.this,"查询护士");
			}
			
		});
		anesthetist.addMouseListener(new MouseAdapter() {

			@Override
			public void mouseClicked(MouseEvent arg0) {
				card.show(AppointPane.this,"查询麻醉师");
			}
			
		});
		submit.addActionListener(new ActionListener() {
			
			@Override
			public void actionPerformed(ActionEvent arg0) {
				System.out.println("点击了提交按扭,处理还没写");				
			}
		});
		back.addActionListener(new ActionListener() {
			
			@Override
			public void actionPerformed(ActionEvent e) {
				System.out.println("点击了返回按扭");
				parent.backMainPane();
			}
		});
	}
	
	class AppointListener implements ActionListener {//定义监听器类
		@Override
		public void actionPerformed(ActionEvent a) {
			if(a.getActionCommand().equals("button_select_patient")) {
				System.out.println("点击了病人选择按扭");
				
			}else if(a.getActionCommand().equals("button_select_nurse")) {
				System.out.println("点击了护士选择按扭");
			}else if(a.getActionCommand().equals("button_select_anesthetist")) {
				System.out.println("点击了麻醉师选择按扭");
			}else if(a.getActionCommand().equals("button_save")) {
				System.out.println("点击了保存按扭");
				//录入并保存信息
				JOptionPane.showMessageDialog(null, "保存成功");
			}
		}
	}
	
	public static void main(String[] args) {
		JFrame f =new BackFrame("test","./imgs/bg2.jpg");
//		f.setLayout(new FlowLayout());
		f.add(new AppointPane(null));
		// 设置大小和显示类型
		f.setBounds(200, 100, 800, 600);
		f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		f.setVisible(true);
	}
}
